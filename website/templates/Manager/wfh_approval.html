{% extends "Manager/manager_base.html" %}
{% block title %}Manager Approve WFH{% endblock %}

{% block content %}
<!-- âœ… FLASH MESSAGES GO HERE, at top of content block -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="alert alert-{{ category }}" style="text-align: center;">
    <h3>{{ message }}</h3>
</div>
{% endfor %}
{% endif %}
{% endwith %}






<h2 style="text-align: center">WFH For Approval</h2>

<table class="table_details table-striped" style="width: 80%; text-align: center;">
    <thead>
        <tr>
            <th>Name</th>
            <th>Reason</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for wfh in wfh_data %}
        <tr>
            <td>{{wfh.admin.first_name}}</td>
            <td>{{wfh.reason}}</td>
            <td>{{wfh.start_date}}</td>
            <td>{{wfh.end_date}}</td>
            <td>
                <a href="{{url_for('profile.reject_wfh',wfh_id = wfh.id)}}" class="button-reject">Reject</a>
                <a href="{{url_for('profile.approve_wfh',wfh_id = wfh.id)}}" class="button-accept">Accept</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h2 style="text-align: center">WFH For Approval</h2>

<div style="display:flex; justify-content:center; width:100%; margin:4px 0px -10px;">
  <form method="POST" action="{{ url_for('manager_bp.wfh_approval') }}"
        style="display:flex; flex-wrap:wrap; align-items:center; gap:8px; padding:6px 12px; background-color:#f9f9f9; border:1px solid #ccc; border-radius:6px; max-width:300px; width:100%; box-sizing:border-box; margin:30px;">

    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <label for="selected_month"
           style="font-weight:bold; font-size:14px; white-space:nowrap; flex:1 1 100%; text-align:center;">
      Filter By Month:
    </label>

    <input type="month" name="selected_month" id="selected_month" value="{{ selected_month }}"
           style="padding:5px 8px; font-size:14px; flex:1 1 auto; min-width:160px; max-width:260px;">

    <button type="submit"
            style="background-color:#007bff; color:white; border:none; padding:5px 10px; border-radius:4px; cursor:pointer; font-size:14px; flex:0 0 auto; min-width:80px;"
            onmouseover="this.style.backgroundColor='#0056b3'"
            onmouseout="this.style.backgroundColor='#007bff'">
      Apply
    </button>
  </form>
</div>


<table class="table_details table-striped" style="width: 80%; text-align: center;">
    <thead>
        <tr>
            <th>Name</th>
            <th>Reason</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for wfh in wfh_another %}
        <tr>
            <td>{{wfh.admin.first_name}}</td>
            <td>{{wfh.reason}}</td>
            <td>{{wfh.start_date}}</td>
            <td>{{wfh.end_date}}</td>
            <td>{{wfh.status}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}